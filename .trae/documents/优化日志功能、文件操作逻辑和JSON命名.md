# 优化计划

## 1. 日志功能优化
- **修改日志配置**：更新 `logger.py`，将日志文件保存到 `log` 文件夹，并在文件名中添加时间戳
- **移除Qt界面日志**：检查并移除 `main_window.py` 中Qt界面的日志显示功能
- **保持控制台输出**：确保所有日志同时在控制台显示

## 2. 文件操作逻辑优化
- **Excel读取优化**：修改 `main_window.py` 中的Excel读取逻辑，支持读取包含物料名称、目标重量、密度、颗粒大小、空瓶重的Excel文件
- **参数更新机制**：在读取Excel数据后，调用 `data_processor.update_parameters()` 更新相关参数
- **优化new_target处理**：修改 `main_window.py` 中865-949行的逻辑，确保正确处理包含多列数据的Excel，并更新参数

## 3. JSON文件命名优化
- **动态JSON命名**：修改 `main_window.py` 第980行，将JSON文件名从固定的`CaCO3.json`改为动态命名：`excel文件名_物料名_处理时间.json`
- **确保唯一标识**：为每个物料生成独立的JSON文件，避免数据混淆

## 4. 具体实现步骤
1. 修改 `logger.py`：更新日志文件路径和命名规则
2. 修改 `main_window.py`：优化Excel读取逻辑，支持多列参数读取
3. 更新 `main_window.py` 中的 `new_target` 处理逻辑，添加参数更新
4. 修改JSON文件命名逻辑，实现动态命名
5. 测试所有功能，确保正常工作

## 5. 预期效果
- 日志保存在 `log` 文件夹，文件名包含时间戳，同时在控制台显示
- 支持读取包含物料名称、目标重量、密度、颗粒大小、空瓶重的Excel文件
- 读取Excel后自动更新数据处理器参数
- 每个物料生成独立的JSON文件，命名规范统一